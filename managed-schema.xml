<!--
This file is used to define the schema of the index.
It is not the real schema, but only the part to be added to the default schema.

Solr uses the managed-schema.xml file to define the schema of the index.
-->
<root>
    <managed-schema>
        <!-- Identifiers -->
        <field name="id" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
        <field name="identifiers" type="strings" indexed="true" stored="true" multiValued="true" required="true"
               docValues="true"/>
        <field name="datestamp" type="pdate" indexed="true" stored="true" multiValued="false"
               required="true"/> <!-- Date of last collection -->
        <field name="origin" type="origin" indexed="true" stored="true" multiValued="false" required="true"
               docValues="true"/> <!-- Origin of the record hal, cairn or open editions -->
        <fieldType name="origin" class="solr.EnumFieldType" docValues="true"
                   enumsConfig="/home/marceau/Téléchargements/solr-9.4.0/server/solr/projet/conf/emumsConfig.xml"
                   enumName="origin"/>

        <!-- Titles -->
        <field name="best_title" type="text_general" indexed="true" stored="true" multiValued="false"
               termVectors="true" termPositions="true" termOffsets="true" required="true"/>

        <field name="title" type="text_general" indexed="true" stored="false" multiValued="true"
               termVectors="true" termPositions="true" termOffsets="true"/>
        <field name="title_Fr" type="text_fr" indexed="true" stored="false" multiValued="false"
               termVectors="true" termPositions="true" termOffsets="true"/>
        <field name="title_En" type="text_en" indexed="true" stored="false" multiValued="false"
               termVectors="true" termPositions="true" termOffsets="true"/>
        <field name="title_De" type="text_de" indexed="true" stored="false" multiValued="false"
               termVectors="true" termPositions="true" termOffsets="true"/>
        <field name="title_Es" type="text_es" indexed="true" stored="false" multiValued="false"
               termVectors="true" termPositions="true" termOffsets="true"/>
        <field name="title_It" type="text_it" indexed="true" stored="false" multiValued="false"
               termVectors="true" termPositions="true" termOffsets="true"/>
        <field name="title_Ru" type="text_ru" indexed="true" stored="false" multiValued="false"
               termVectors="true" termPositions="true" termOffsets="true"/>

        <field name="titles" type="text_general" indexed="true" stored="true" multiValued="true"
               termVectors="true" termPositions="true" termOffsets="true"/>
        <copyField source="title_*" dest="titles" maxChars="4000"/>

        <!-- Descriptions -->
        <field name="best_description" type="text_general" indexed="true" stored="true" multiValued="false"/>

        <field name="descriptions" type="text_general" indexed="true" stored="false" multiValued="true"/>
        <field name="description_Fr" type="text_fr" indexed="true" stored="false" multiValued="false"/>
        <field name="description_En" type="text_en" indexed="true" stored="false" multiValued="false"/>
        <field name="description_De" type="text_de" indexed="true" stored="false" multiValued="false"/>
        <field name="description_Es" type="text_es" indexed="true" stored="false" multiValued="false"/>
        <field name="description_It" type="text_it" indexed="true" stored="false" multiValued="false"/>
        <field name="description_Ru" type="text_ru" indexed="true" stored="false" multiValued="false"/>
        <copyField source="description_*" dest="descriptions" maxChars="8000"/>


        <!-- Number fields, automatically generated by the python script -->
        <field name="nb_titles" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
        <field name="nb_creators" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
        <field name="nb_contributors" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
        <field name="nb_subjects" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
        <field name="nb_publishers" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
        <field name="nb_languages" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
        <field name="nb_sets" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>

        <!-- Keywords (subjects) -->
        <field name="subjects" type="text_general" indexed="true" stored="false" multiValued="true"/>
        <field name="subjects_Fr" type="text_fr" indexed="true" stored="false" multiValued="true"/>
        <field name="subjects_En" type="text_en" indexed="true" stored="false" multiValued="true"/>
        <field name="subjects_De" type="text_de" indexed="true" stored="false" multiValued="true"/>
        <field name="subjects_Es" type="text_es" indexed="true" stored="false" multiValued="true"/>
        <field name="subjects_It" type="text_it" indexed="true" stored="false" multiValued="true"/>
        <field name="subjects_Ru" type="text_ru" indexed="true" stored="false" multiValued="true"/>
        <copyField source="subjects_*" dest="subjects" maxChars="4000"/>

        <!-- Creators -->
        <field name="creators" type="text_general" indexed="true" stored="true" multiValued="true"/>

        <!-- Contributors -->
        <field name="contributors" type="text_general" indexed="true" stored="true" multiValued="true"/>

        <!-- Publishers -->
        <field name="publishers" type="text_general" indexed="true" stored="true" multiValued="true"/>

        <!-- Languages -->
        <field name="languages" type="languages" indexed="true" stored="true" multiValued="true" docValues="true"/>
        <fieldType name="languages" class="solr.EnumFieldType" docValues="true"
                   enumsConfig="/home/marceau/Téléchargements/solr-9.4.0/server/solr/projet/conf/emumsConfig.xml"
                   enumName="languages"/>

        <!-- Sets, the groups of publications a publication belongs to -->
        <field name="sets" type="string" indexed="true" stored="true" multiValued="true" docValues="true"/>

        <!-- Dates, dates in the publication, could be publication date, creation date, etc. -->
        <field name="dates" type="pdate" indexed="true" stored="true" multiValued="true" docValues="true"/>

        <!-- Types, the type of the publication, could be article, book, etc. -->
        <field name="types" type="string" indexed="true" stored="true" multiValued="true"/>

        <!-- Formats, the format of the publication, could be pdf, epub, etc. -->
        <field name="formats" type="string" indexed="true" stored="true" multiValued="true"/>

        <!-- Coverage, maybe a useless field -->
        <field name="couvertures" type="text_general" indexed="true" stored="true" multiValued="true"/>

        <!-- Access rights, maybe a useless field -->
        <field name="accessibilities" type="text_general" indexed="true" stored="false" multiValued="true"/>

        <!-- Sources, the source of the publication, could be any journal, book, workshop, etc. -->
        <field name="sources" type="text_general" indexed="true" stored="true" multiValued="true"/>

        <!-- Relations, the relations of the publication, could be any journal, book, workshop, etc. -->
        <field name="relations" type="text_general" indexed="true" stored="true" multiValued="true"/>

        <!-- Rights holders, the rights holders of the publication, could be any journal, book, workshop, etc. -->
        <field name="rights" type="text_general" indexed="true" stored="true" multiValued="true"/>


        <uniqueKey>id</uniqueKey>
        <uniqueKey>identifiants</uniqueKey>

        <copyField source="descriptions" dest="catchall"/>
        <copyField source="titles" dest="catchall"/>
        <copyField source="subjects" dest="catchall"/>
        <copyField source="creators" dest="catchall"/>
        <copyField source="contributors" dest="catchall"/>
        <copyField source="publishers" dest="catchall"/>
        <field name="catchall" type="text_general" indexed="true" stored="false" multiValued="true"/>
    </managed-schema>

    <solrconfig>
        <requestHandler name="/select" class="solr.SearchHandler">
            <lst name="defaults">
                <str name="echoParams">explicit</str>
                <int name="rows">10</int>
                <str name="df">catchall</str>
            </lst>
        </requestHandler>
    </solrconfig>

    <enumsConfig>
        <enum name="languages">
            <value>fr</value>
            <value>en</value>
            <value>de</value>
            <value>es</value>
            <value>it</value>
            <value>ru</value>
        </enum>
        <enum name="origin">
            <value>cairn</value>
            <value>hal</value>
            <value>open editions</value>
        </enum>
    </enumsConfig>
</root>
