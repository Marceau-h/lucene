<?xml version="1.0" encoding="UTF-8" ?>

<!-- To be placed in server/solr/projet/conf/managed-schema.xml -->
<!--
This file is used to define the schema of the index.
It is not the real schema, but only the part to be added to the default schema.

Solr uses the managed-schema.xml file to define the schema of the index.
-->
<managed-schema>
    <uniqueKey>id</uniqueKey>

    <!-- Identifiers -->
    <field name="id" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
    <field name="identifier" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
    <!--        <copyField source="identifier" dest="id"/>-->

    <field name="identifiers" type="strings" indexed="true" stored="true" multiValued="true" required="true"
           docValues="true"/>
    <field name="datestamp" type="pdate" indexed="true" stored="true" multiValued="false"
           required="false"/> <!-- Date of last collection -->
    <field name="origin" type="origin" indexed="true" stored="true" multiValued="false" required="true"
           docValues="true" default="toto"/> <!-- Origin of the record hal, cairn or open editions -->
    <fieldType name="origin" class="solr.EnumFieldType" docValues="true" enumName="origin"
               enumsConfig="enumsConfig.xml"/>

    <!-- Number fields, automatically generated by the python script -->
    <field name="nb_titles" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
    <field name="nb_creators" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
    <field name="nb_contributors" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
    <field name="nb_subjects" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
    <field name="nb_publishers" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
    <field name="nb_languages" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>
    <field name="nb_sets" type="pint" indexed="true" stored="true" multiValued="false" required="true"/>

    <!-- Creators -->
    <field name="creators" type="text_general" indexed="true" stored="true" multiValued="true"/>

    <!-- Contributors -->
    <field name="contributors" type="text_general" indexed="true" stored="true" multiValued="true"/>

    <!-- Publishers -->
    <field name="publishers" type="text_general" indexed="true" stored="true" multiValued="true"/>

    <!-- Languages -->
    <field name="languages" type="languages" indexed="true" stored="true" multiValued="true" docValues="true"/>
    <fieldType name="languages" class="solr.EnumFieldType" docValues="true" enumName="languages"
               enumsConfig="enumsConfig.xml"/>

    <!-- Sets, the groups of publications a publication belongs to -->
    <field name="sets" type="string" indexed="true" stored="true" multiValued="true" docValues="true"/>

    <!-- Dates, dates in the publication, could be publication date, creation date, etc. -->
    <field name="dates" type="pdate" indexed="true" stored="true" multiValued="true" docValues="true"/>

    <!-- Types, the type of the publication, could be article, book, etc. -->
    <field name="types" type="string" indexed="true" stored="true" multiValued="true"/>

    <!-- Formats, the format of the publication, could be pdf, epub, etc. -->
    <field name="formats" type="string" indexed="true" stored="true" multiValued="true"/>

    <!-- Coverage, maybe a useless field -->
    <field name="couvertures" type="text_general" indexed="true" stored="true" multiValued="true"/>

    <!-- Access rights, saying if you can raed it on Cairn without institutional or private account -->
    <field name="accessibilities" type="text_general" indexed="true" stored="false" multiValued="true"/>
    <field name="cairn_free_consultation" type="boolean" indexed="true" stored="true" multiValued="false"/>

    <!-- Sources, the source of the publication, could be any journal, book, workshop, etc. -->
    <field name="sources" type="text_general" indexed="true" stored="true" multiValued="true"/>

    <!-- Relations, the relations of the publication, could be any journal, book, workshop, etc. -->
    <field name="relations" type="text_general" indexed="true" stored="true" multiValued="true"/>

    <!-- Rights holders, the rights holders of the publication, could be any journal, book, workshop, etc. -->
    <field name="rights" type="text_general" indexed="true" stored="true" multiValued="true"/>
    <field name="open_access" type="boolean" indexed="true" stored="true" multiValued="false"/>

    <field name="catchall" type="text_general" indexed="true" stored="false" multiValued="true"/>
    <copyField source="descriptions" dest="catchall"/>
    <copyField source="titles" dest="catchall"/>
    <copyField source="subjects" dest="catchall"/>
    <copyField source="creators" dest="catchall"/>
    <copyField source="contributors" dest="catchall"/>
    <copyField source="publishers" dest="catchall"/>

</managed-schema>
